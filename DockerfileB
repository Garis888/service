FROM python:3.12

ENV TZ=Europe/Moscow
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

RUN apt-get update -y
RUN apt-get install locales -y
RUN sed -i '/ru_RU.UTF-8/s/^# //g' /etc/locale.gen && locale-gen
ENV LANG ru_RU.UTF-8
ENV LANGUAGE ru_RU:ru
ENV LC_ALL ru_RU.UTF-8

RUN  rm -rf /var/lib/apt/lists/*

RUN pip install --upgrade pip
COPY ./requirementsB.txt /opt/app/
WORKDIR /opt/app
RUN pip install -r requirementsB.txt
COPY . /opt/app/

# CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload", "--workers", "1"]
